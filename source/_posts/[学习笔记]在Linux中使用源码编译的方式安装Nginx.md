---
thumbnail: >-
  images/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16
title: '[学习笔记]在Linux中使用源码编译的方式安装Nginx'
excerpt: >-
  使用源码的方式安装nginx，可以加深对linux目录的理解，今天就来放弃yum.. rpm.. dnf..
  这些在linux下较为“傻瓜”的操作方式，实战源码编译的方式安装nginx！
tags:
  - Linux
  - Nginx
categories:
  - .NET
  - DevOps
toc: true
recommend: 1
keywords: categories-java
uniqueId: '2022-03-17 20:28:00/[学习笔记]在Linux中使用源码编译的方式安装Nginx.html'
abbrlink: e4f943fa
date: 2022-03-17 20:28:00
cover:
description:
---
<h2><span data-cke-copybin-start="1"><span data-cke-copybin-start="1">​</span></span>准备工作</h2>
<p><strong>准备nginx源码包：</strong></p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="31" data-cke-widget-wrapper="1"><a class="has-card cke_widget_editable cke_widget_element" title="nginx: download" href="http://nginx.org/en/download.html" data-cke-enter-mode="2" data-cke-saved-href="http://nginx.org/en/download.html" data-cke-widget-data="%7B%22url%22%3A%22http%3A%2F%2Fnginx.org%2Fen%2Fdownload.html%22%2C%22text%22%3A%22nginx%3A%20download%22%2C%22desc%22%3A%22%22%2C%22icon%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22isCard%22%3Atrue%2C%22hasResquest%22%3Atrue%2C%22iconDefault%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22id%22%3A%22OzCUuY-1647519956136%22%2C%22classes%22%3A%7B%22has-card%22%3A1%7D%7D" data-cke-widget-editable="text" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.0.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=M276" data-link-title="nginx: download" data-widget="csdnlink"><span class="link-card-box"><span class="link-title"><span class="link-link">http://nginx.org/en/download.html</span></span></span></a></span></p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="31" data-cke-widget-wrapper="1"><strong>准备相关的依赖包以及环境：</strong></span></p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="31" data-cke-widget-wrapper="1"> gzip 模块需要 zlib 库&nbsp;&nbsp;<span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="30" data-cke-widget-wrapper="1"><a class="has-card cke_widget_editable cke_widget_element" title="zlib Home Site" href="http://www.zlib.net/" data-cke-enter-mode="2" data-cke-saved-href="http://www.zlib.net/" data-cke-widget-data="%7B%22url%22%3A%22http%3A%2F%2Fwww.zlib.net%2F%22%2C%22text%22%3A%22zlib%20Home%20Site%22%2C%22desc%22%3A%22%22%2C%22icon%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22isCard%22%3Atrue%2C%22hasResquest%22%3Atrue%2C%22iconDefault%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22id%22%3A%22WS8VjK-1647519956130%22%2C%22classes%22%3A%7B%22has-card%22%3A1%7D%7D" data-cke-widget-editable="text" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.0.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=M276" data-link-title="zlib Home Site" data-widget="csdnlink"><span class="link-card-box"><span class="link-title"><span class="link-link">http://www.zlib.net/</span></span></span></a>rewrite </span></span></p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="31" data-cke-widget-wrapper="1"><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="30" data-cke-widget-wrapper="1">模块需要 pcre 库</span></span><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="31" data-cke-widget-wrapper="1"><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="30" data-cke-widget-wrapper="1"><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="29" data-cke-widget-wrapper="1"><a class="has-card cke_widget_editable cke_widget_element" title="PCRE - Perl Compatible Regular Expressions" href="http://www.pcre.org/" data-cke-enter-mode="2" data-cke-saved-href="http://www.pcre.org/" data-cke-widget-data="%7B%22url%22%3A%22http%3A%2F%2Fwww.pcre.org%2F%22%2C%22text%22%3A%22PCRE%20-%20Perl%20Compatible%20Regular%20Expressions%22%2C%22desc%22%3A%22%22%2C%22icon%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22isCard%22%3Atrue%2C%22hasResquest%22%3Atrue%2C%22iconDefault%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22id%22%3A%22piXbc8-1647519956123%22%2C%22classes%22%3A%7B%22has-card%22%3A1%7D%7D" data-cke-widget-editable="text" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.0.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=M276" data-link-title="PCRE - Perl Compatible Regular Expressions" data-widget="csdnlink"><span class="link-card-box"><span class="link-title"><span class="link-link">http://www.pcre.org/</span></span></span></a></span></span></span></p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="31" data-cke-widget-wrapper="1"><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="30" data-cke-widget-wrapper="1"><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="29" data-cke-widget-wrapper="1">若开启ssl 功能则需要 openssl 库<span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="28" data-cke-widget-wrapper="1"><a class="has-card cke_widget_editable cke_widget_element" title="/source/index.html (openssl.org)" href="https://www.openssl.org/source/" data-cke-enter-mode="2" data-cke-saved-href="https://www.openssl.org/source/" data-cke-widget-data="%7B%22url%22%3A%22https%3A%2F%2Fwww.openssl.org%2Fsource%2F%22%2C%22text%22%3A%22%2Fsource%2Findex.html%20(openssl.org)%22%2C%22desc%22%3A%22%22%2C%22icon%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22isCard%22%3Atrue%2C%22hasResquest%22%3Atrue%2C%22iconDefault%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22id%22%3A%223EwRDx-1647519956116%22%2C%22classes%22%3A%7B%22has-card%22%3A1%7D%7D" data-cke-widget-editable="text" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.0.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=M276" data-link-title="/source/index.html (openssl.org)" data-widget="csdnlink"><span class="link-card-box"><span class="link-title"><span class="link-link">https://www.openssl.org/source/</span></span></span></a></span></span></span></span></p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="31" data-cke-widget-wrapper="1"><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="30" data-cke-widget-wrapper="1"><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="29" data-cke-widget-wrapper="1"><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="28" data-cke-widget-wrapper="1">如果没有安装gcc-c++，需要安装它，运行如下命令：</span></span></span></span></p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="27" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22yum%20install%20gcc-c%2B%2B%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">yum install gcc-c++</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>安装完成：</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="26" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/b3611a5ef6534cb8a26991b7c9eefb94.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_16,color_FFFFFF,t_70,g_se,x_16" alt="" width="411" height="107" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/b3611a5ef6534cb8a26991b7c9eefb94.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_16,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2Fb3611a5ef6534cb8a26991b7c9eefb94.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22411%22%2C%22height%22%3A%22107%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>用上传工具将安装包拷贝到Home的任意目录下</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="25" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/01a86d1e702d4ca38b5baf710072c6bc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="" width="686" height="112" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/01a86d1e702d4ca38b5baf710072c6bc.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2F01a86d1e702d4ca38b5baf710072c6bc.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22686%22%2C%22height%22%3A%22112%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>&nbsp;&nbsp;将这几个文件拷贝至/usr目录下：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="24" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20cp%20openssl-3.0.2.tar.gz%20%2Fusr%2F%5Cnsudo%20cp%20pcre-8.45.tar.gz%20%2Fusr%2F%5Cnsudo%20cp%20zlib-1.2.11.tar.gz%20%2Fusr%2F%5Cnsudo%20cp%20nginx-1.20.2.tar.gz%20%2Fusr%2F%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo cp openssl-3.0.2.tar.gz /usr/
sudo cp pcre-8.45.tar.gz /usr/
sudo cp zlib-1.2.11.tar.gz /usr/
sudo cp nginx-1.20.2.tar.gz /usr/</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<h2>安装openssl-3.0.2：</h2>
<p>回到/usr目录下运行：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="23" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20tar%20-zxvf%20openssl-3.0.2.tar.gz%5Cncd%20openssl-3.0.2%5Cnsudo%20.%2Fconfig%5Cnsudo%20make%20%26%26%20make%20install%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo tar -zxvf openssl-3.0.2.tar.gz
cd openssl-3.0.2
sudo ./config
sudo make &amp;&amp; make install</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>如果出现&nbsp;&nbsp;Can't&nbsp;locate&nbsp;IPC/Cmd.pm 这样的错误如下图</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="22" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/43c5a754fb104616a60032dd8aab6e30.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="" width="898" height="137" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/43c5a754fb104616a60032dd8aab6e30.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2F43c5a754fb104616a60032dd8aab6e30.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22898%22%2C%22height%22%3A%22137%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>&nbsp;则根据这篇文章安装相关模块</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_wrapper_has-card cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="21" data-cke-widget-wrapper="1"><a class="has-card cke_widget_editable cke_widget_element" title="(5条消息) 编译OpenSSL时报错，Can&lsquo;t locate IPC/Cmd.pm in @INC_Sunlight_Rain_的博客-CSDN博客" href="https://blog.csdn.net/sd4493091/article/details/122220902" data-cke-enter-mode="2" data-cke-saved-href="https://blog.csdn.net/sd4493091/article/details/122220902" data-cke-widget-data="%7B%22url%22%3A%22https%3A%2F%2Fblog.csdn.net%2Fsd4493091%2Farticle%2Fdetails%2F122220902%22%2C%22text%22%3A%22(5%E6%9D%A1%E6%B6%88%E6%81%AF)%20%E7%BC%96%E8%AF%91OpenSSL%E6%97%B6%E6%8A%A5%E9%94%99%EF%BC%8CCan%E2%80%98t%20locate%20IPC%2FCmd.pm%20in%20%40INC_Sunlight_Rain_%E7%9A%84%E5%8D%9A%E5%AE%A2-CSDN%E5%8D%9A%E5%AE%A2%22%2C%22desc%22%3A%22%22%2C%22icon%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22isCard%22%3Atrue%2C%22hasResquest%22%3Atrue%2C%22iconDefault%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2C%22id%22%3A%225R5mwF-1647519956085%22%2C%22classes%22%3A%7B%22has-card%22%3A1%7D%7D" data-cke-widget-editable="text" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.0.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=M276" data-link-title="(5条消息) 编译OpenSSL时报错，Can&lsquo;t locate IPC/Cmd.pm in @INC_Sunlight_Rain_的博客-CSDN博客" data-widget="csdnlink"><span class="link-card-box"><span class="link-title">(5条消息) 编译OpenSSL时报错，Can&lsquo;t locate IPC/Cmd.pm in @INC_Sunlight_Rain_的博客-CSDN博客<span class="link-link"><img src="https://csdnimg.cn/release/blog_editor_html/release2.0.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=M276" alt=" " class="link-link-icon" data-cke-realelement="%3Cimg%20class%3D%22link-link-icon%22%20alt%3D%22%20%22%20src%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.0.8%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DM276%22%2F%3E" />https://blog.csdn.net/sd4493091/article/details/122220902</span></span></span></a></span></p>
<h2>安装pcre-8.45：</h2>
<p>回到/usr目录下运行：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="20" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20tar%20-zxvf%20pcre-8.45.tar.gz%5Cncd%20pcre-8.45%5Cnsudo%20.%2Fconfigure%5Cnsudo%20make%20%26%26%20make%20install%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo tar -zxvf pcre-8.45.tar.gz
cd pcre-8.45
sudo ./configure
sudo make &amp;&amp; make install</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<h2>&nbsp;安装zlib-1.2.11：</h2>
<p>回到/usr目录下运行：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="19" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20tar%20-zxvf%20zlib-1.2.11.tar.gz%5Cncd%20zlib-1.2.11%5Cnsudo%20.%2Fconfigure%5Cnsudo%20make%20%26%26%20make%20install%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo tar -zxvf zlib-1.2.11.tar.gz
cd zlib-1.2.11
sudo ./configure
sudo make &amp;&amp; make install</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>&nbsp;</p>
<h2>安装nginx</h2>
<p>回到/usr目录下运行：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="18" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20tar%20zxvf%20nginx-1.20.2.tar.gz%5Cncd%20nginx-1.8.0%5Cnsudo%20.%2Fconfigure%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo tar zxvf nginx-1.20.2.tar.gz
cd nginx-1.8.0
sudo ./configure</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>configure的时候会验证安装环境，若依赖包环境安装不全则可能出现如下错误</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="17" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/8b64793e376b4958b13b9389384068d1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="" width="656" height="89" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/8b64793e376b4958b13b9389384068d1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2F8b64793e376b4958b13b9389384068d1.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22656%22%2C%22height%22%3A%2289%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>通过所有检测：&nbsp;</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="16" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/af6ebab5e4dc40e5ab5e5e26fc86bde3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="" width="716" height="285" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/af6ebab5e4dc40e5ab5e5e26fc86bde3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2Faf6ebab5e4dc40e5ab5e5e26fc86bde3.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22716%22%2C%22height%22%3A%22285%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>&nbsp;运行：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="15" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20make%20%26%26%20make%20install%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo make &amp;&amp; make install</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>等待编译完成，运行whereis查看nginx安装目录：</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="14" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/e7fba3c8874f4c7dba8afde56818a193.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_17,color_FFFFFF,t_70,g_se,x_16" alt="" width="428" height="67" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/e7fba3c8874f4c7dba8afde56818a193.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_17,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe7fba3c8874f4c7dba8afde56818a193.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22428%22%2C%22height%22%3A%2267%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>运行下面语句，将执行二进制软链接到/usr/sbin/nginx目录下：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="13" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22%20sudo%20ln%20-s%20%2Fusr%2Flocal%2Fnginx%2Fsbin%2Fnginx%20%2Fusr%2Fsbin%2Fnginx%5Cn%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs"> sudo ln -s /usr/local/nginx/sbin/nginx /usr/sbin/nginx
</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>安装成功<br />
<span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="12" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/8f44eb112b61435d917ddb660ef9dad0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_12,color_FFFFFF,t_70,g_se,x_16" alt="" width="308" height="37" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/8f44eb112b61435d917ddb660ef9dad0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_12,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2F8f44eb112b61435d917ddb660ef9dad0.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22308%22%2C%22height%22%3A%2237%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317202737086-123857155.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>&nbsp;<span data-cke-copybin-start="1"><span data-cke-copybin-start="1">​</span></span></p>
<h2><span id="cke_bm_4975S">将nginx写入系统服务</span></h2>
<p>运行下面语句在 /usr/lib/systemd/system/目录下建立服务描述文件nginx.service：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="139" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22bash%22%2C%22code%22%3A%22vi%20%2Fusr%2Flib%2Fsystemd%2Fsystem%2Fnginx.service%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-bash hljs">vi /usr/lib/systemd/system/nginx.service</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>输入下面内容并保存&nbsp;</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="138" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22%5BUnit%5D%5CnDescription%3DThe%20nginx%20HTTP%20and%20reverse%20proxy%20server%5CnAfter%3Dnetwork.target%20remote-fs.target%20nss-lookup.target%5Cn%5Cn%5BService%5D%5CnType%3Dforking%5CnPIDFile%3D%2Frun%2Fnginx.pid%5Cn%23%20Nginx%20will%20fail%20to%20start%20if%20%2Frun%2Fnginx.pid%20already%20exists%20but%20has%20the%20wrong%5Cn%23%20SELinux%20context.%20This%20might%20happen%20when%20running%20%60nginx%20-t%60%20from%20the%20cmdline.%5Cn%23%20https%3A%2F%2Fbugzilla.redhat.com%2Fshow_bug.cgi%3Fid%3D1268621%5CnExecStartPre%3D%2Fusr%2Fbin%2Frm%20-f%20%2Frun%2Fnginx.pid%5CnExecStartPre%3D%2Fusr%2Fsbin%2Fnginx%20-t%5CnExecStart%3D%2Fusr%2Fsbin%2Fnginx%5CnExecReload%3D%2Fbin%2Fkill%20-s%20HUP%20%24MAINPID%5CnKillSignal%3DSIGQUIT%5CnTimeoutStopSec%3D5%5CnKillMode%3Dmixed%5CnPrivateTmp%3Dtrue%5Cn%5Cn%5BInstall%5D%5CnWantedBy%3Dmulti-user.target%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">[Unit]
Description=The nginx HTTP and reverse proxy server
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=forking
PIDFile=/run/nginx.pid
# Nginx will fail to start if /run/nginx.pid already exists but has the wrong
# SELinux context. This might happen when running `nginx -t` from the cmdline.
# https://bugzilla.redhat.com/show_bug.cgi?id=1268621
ExecStartPre=/usr/bin/rm -f /run/nginx.pid
ExecStartPre=/usr/sbin/nginx -t
ExecStart=/usr/sbin/nginx
ExecReload=/bin/kill -s HUP $MAINPID
KillSignal=SIGQUIT
TimeoutStopSec=5
KillMode=mixed
PrivateTmp=true

[Install]
WantedBy=multi-user.target</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>运行如下命令，重新加载配置文件和.service文件：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="137" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20systemctl%20daemon-reload%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo systemctl daemon-reload</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="136" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/9a97076329d04585a4fbc7e088fb5763.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="" width="750" height="63" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/9a97076329d04585a4fbc7e088fb5763.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2F9a97076329d04585a4fbc7e088fb5763.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22750%22%2C%22height%22%3A%2263%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>可以看到 服务已经被加载进来了</p>
<p>之后就可以启用服务或者添加到启动项了</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="135" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20systemctl%20start%20nginx.service%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo systemctl start nginx.service</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="134" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20systemctl%20enable%20nginx.service%5Cn%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo systemctl enable nginx.service
</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>最后一步别忘了开启防火墙80端口的访问：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="160" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22classes%22%3Anull%2C%22lang%22%3A%22%22%2C%22code%22%3A%22sudo%20firewall-cmd%20--zone%3Dpublic%20--add-port%3D80%2Ftcp%20--permanent%20%5Cnsudo%20firewall-cmd%20--reload%22%7D" data-cke-widget-keep-attr="0" data-widget="codeSnippet"><code class="hljs">sudo firewall-cmd --zone=public --add-port=80/tcp --permanent 
sudo firewall-cmd --reload</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>&nbsp;成功启动：</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="162" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/d573c407dfd740d99c197dc73bc8e705.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="" width="868" height="681" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/d573c407dfd740d99c197dc73bc8e705.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_20,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd573c407dfd740d99c197dc73bc8e705.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22868%22%2C%22height%22%3A%22681%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>&nbsp;</p>
<h2>Troubleshooting</h2>
<p>1. 如果端口被占用，则无法运行nginx，默认nginx是通过80端口访问的，所以需要排查端口占用的程序：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="133" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22netstat%20-tunlp%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">netstat -tunlp</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>2. 如果systemd有报错，可以通过如下命令查看</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="132" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20journalctl%20-fu%20%C2%A0nginx.service%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo journalctl -fu &nbsp;nginx.service</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>3. 默认情况下日志记录在syslog，如果看报错详细，可以通过如下命令查看</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="131" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20cat%20%2Fvar%2Flog%2Fmessages%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo cat /var/log/messages</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>4. 如果有类似Can't open PID file /run/nginx.pid&nbsp;&nbsp;这样的报错，需要修改nginx.service 中pid文件的路径为实际pid的路径，具体路径在nginx.conf中查看：</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="130" data-cke-widget-wrapper="1"><img src="https://img-blog.csdnimg.cn/325462896214432696a2be35cdb9aff8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_13,color_FFFFFF,t_70,g_se,x_16" alt="" width="338" height="227" class="cke_widget_element" data-cke-saved-src="https://img-blog.csdnimg.cn/325462896214432696a2be35cdb9aff8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6X5pmTbHg=,size_13,color_FFFFFF,t_70,g_se,x_16" data-cke-widget-data="%7B%22hasCaption%22%3Afalse%2C%22src%22%3A%22https%3A%2F%2Fimg-blog.csdnimg.cn%2F325462896214432696a2be35cdb9aff8.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5p6X5pmTbHg%3D%2Csize_13%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16%22%2C%22alt%22%3A%22%22%2C%22width%22%3A%22338%22%2C%22height%22%3A%22227%22%2C%22lock%22%3Atrue%2C%22align%22%3A%22none%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​</span></span></span></p>
<p>运行下面命令：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="129" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22sudo%20vi%20%2Fusr%2Flib%2Fsystemd%2Fsystem%2Fnginx.service%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">sudo vi /usr/lib/systemd/system/nginx.service</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>将ExecStartPre与PIDFile项改为如下：</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="128" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22ExecStartPre%3D%2Fusr%2Fbin%2Frm%20-f%20%2Fusr%2Flocal%2Fnginx%2Flogs%2Fnginx.pid%5CnPIDFile%3D%2Fusr%2Flocal%2Fnginx%2Flogs%2Fnginx.pid%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">ExecStartPre=/usr/bin/rm -f /usr/local/nginx/logs/nginx.pid
PIDFile=/usr/local/nginx/logs/nginx.pid</code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2022.cnblogs.com/blog/644861/202203/644861-20220317205337757-796294629.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1" /></span></div>
<p>全文完</p>
<h2><span data-cke-copybin-start="1"><span data-cke-copybin-end="1">​</span></span></h2>